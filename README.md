# Markowitz Portfolio Optimization with Value at Risk (VaR)

## Overview

This project demonstrates the implementation of **Markowitz Portfolio Optimization**, also known as **Modern Portfolio Theory (MPT)**, to construct an optimized portfolio that maximizes risk-adjusted returns. In addition to optimizing the portfolio using **Monte Carlo simulation** and **SciPy optimization**, we integrate **Value at Risk (VaR)** to assess the potential downside risk of the portfolio under different confidence levels.

The project utilizes historical stock data from various sectors to create a diversified portfolio and provides insights into portfolio performance, volatility, and potential risks.

### Key Features:
- **Markowitz Portfolio Optimization**: Optimize the portfolio using Monte Carlo simulation and SciPy to maximize the Sharpe ratio.
- **Efficient Frontier**: Visualize the risk-return tradeoff for various portfolios generated by the optimization process.
- **Value at Risk (VaR)**: Quantify the potential loss in the portfolio at 95% and 99% confidence levels.

---

## Stock Selection

We used four stocks from different sectors to create a diversified portfolio:

- **Apple (AAPL)**: Technology
- **Pfizer (PFE)**: Healthcare
- **Procter & Gamble (PG)**: Consumer Goods
- **ExxonMobil (XOM)**: Energy

---

## Methodology

### 1. **Data Collection**
We fetched the historical adjusted closing prices of the selected stocks using Yahoo Finance, covering 2000 days of trading history.

### 2. **Log Returns Calculation**
We calculated the daily **log returns** for each stock to provide a more stable measure of returns over time. This helps in reducing the impact of large price movements on optimization.

### 3. **Monte Carlo Simulation**
We generated **50,000 random portfolios** by assigning random weights to the selected stocks. For each portfolio, we calculated:
- **Annualized return**
- **Volatility (risk)**
- **Sharpe ratio**

The portfolio with the highest Sharpe ratio was selected as the optimal portfolio.

### 4. **SciPy Optimization**
We also used **SciPy's optimization** function to directly calculate the portfolio weights that maximize the Sharpe ratio. This provides an efficient method for finding the optimal portfolio.

### 5. **Efficient Frontier**
The **Efficient Frontier** visualizes the trade-off between risk and return for the portfolios generated by the Monte Carlo simulation. The portfolio with the highest Sharpe ratio is highlighted on the chart.

### 6. **Value at Risk (VaR)**
We calculated **Value at Risk (VaR)** for the optimized portfolio at two confidence levels:
- **95% confidence level**
- **99% confidence level**

VaR provides a measure of the potential loss in portfolio value under normal market conditions.

---

## Results

### Optimized Portfolio (SciPy):
- **Apple (AAPL)**: 67.82%
- **Procter & Gamble (PG)**: 29.22%
- **ExxonMobil (XOM)**: 2.96%
- **Pfizer (PFE)**: 0.00%

**Performance Metrics:**
- **Expected Annual Return**: 23.56%
- **Annual Volatility**: 24.65%
- **Sharpe Ratio**: 0.96

### Value at Risk (VaR):
- **VaR at 95% confidence level**: -2.52%
- **VaR at 99% confidence level**: -3.60%

These VaR values indicate that:
- At a 95% confidence level, the portfolio has a maximum expected loss of **2.52%** in a day under normal market conditions.
- At a 99% confidence level, the potential maximum loss increases to **3.60%**.

---

## Conclusion

This project demonstrates the practical application of **Markowitz Portfolio Optimization** and **Value at Risk (VaR)** in portfolio management. The optimized portfolio offers a high potential return (23.56%) with moderate risk (24.65% volatility), largely due to the concentration in **Apple (AAPL)**.

However, the **VaR** analysis highlights that the portfolio does carry downside risk, with potential losses of up to **2.52%** in a day at a 95% confidence level. This suggests that while the portfolio offers strong returns, it is still exposed to market volatility, particularly due to its heavy reliance on technology.

Future improvements could include:
- Exploring other asset classes (e.g., bonds, international stocks) to diversify risk further.
- Including **transaction costs** or other real-world constraints in the optimization process.
